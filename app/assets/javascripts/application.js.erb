/*
 ==== Standard ====
 = require jquery
 = require bootstrap

 ==== Angular ====
 = require angular

 ==== Angular Plugins ====
 = require lodash
 = require restangular
 = require angular-ui-router
 = require angular-animate
 = require summernote
 = require angular-summernote
 = require mobile-angular-ui/dist/js/mobile-angular-ui.min.js
 = require angular-google-maps
 = require angular-payments

 = require_self
 = require_tree ./angular/templates
 = require_tree .
 */

var APP = angular.module('<%= Rails.application.class.parent_name %>', [
  'ui.router',
  'summernote',
  'templates',
  'restangular',
  'mobile-angular-ui',
  'ngAnimate',
  'geolocation',
  'google-maps',
  'angularPayments'
]);

APP.config(function($stateProvider, $urlRouterProvider, $locationProvider, RestangularProvider) {
  RestangularProvider.setBaseUrl("/api");

  $urlRouterProvider.otherwise("/stories/featured");

  $stateProvider
    .state("stories", {
      abstract: true,
      url: "/stories",
      templateUrl: "stories.html",
      controller: "StoriesController"
    })
      .state('stories.featured', {
        url: "/featured?id",
        templateUrl: "stories/show.html",
        controller: "FeaturedStoriesController"
      })
      .state('stories.user', {
        url: "/user?id",
        templateUrl: "stories/show.html",
        controller: "UserStoriesController"
      })
      .state('stories.new', {
        url: "/new/choose",
        templateUrl: "stories/new/type.html"
      })
      .state('stories.new_2', {
        url: "/new/:type",
        templateUrl: "stories/new/form.html",
        controller: "NewStoryController"
      })
    .state("clubs", {
      abstract: true,
      url: "/clubs",
      templateUrl: "clubs.html"
    })
      .state("clubs.list", {
        url: "/",
        templateUrl: "clubs/list.html",
        controller: "ClubsListController"
      })
      .state("clubs.show", {
        url: "/:id",
        templateUrl: "clubs/show.html",
        controller: "ClubsShowController"
      })
    .state("donate", {
      abstract: true,
      url: "/donate",
      templateUrl: "donate.html",
      controller: "DonateController"
    })
      .state("donate.amount", {
        url: "",
        templateUrl: "donate/one.html"
      })
      .state("donate.monthly", {
        url: "",
        templateUrl: "donate/two.html"
      })
      .state("donate.details", {
        url: "",
        templateUrl: "donate/three.html"
      })
      .state("donate.finish", {
        url: "/done",
        templateUrl: "donate/done.html"
      })
  ;

  // This allows the user to have a proper history / browsing stack
  $locationProvider.html5Mode(true);
});
